---
title: "Integrate with Your 3rd Party Analytics System"
description: "Understanding Helium's event forwarding and analytics integration"
icon: "chart-mixed"
---

## Overview

Helium automatically forwards all paywall events to your configured analytics provider. This guide explains what data is sent, how the event system works, and which fields are available for your analysis.

## How Helium Sends Events

Helium uses a dual-system approach for maximum flexibility:

### 1. Automatic Analytics Integration

When you configure an analytics provider (Amplitude, Mixpanel, etc.) in the [Helium dashboard](https://app.tryhelium.com/integrations), Helium automatically:

- Sends all paywall lifecycle events with the `helium_` prefix
- Includes comprehensive context about the user, device, and session
- Adds experiment allocation data for A/B tests
- Forwards purchase and subscription events

Helium uses Segment's CDP infrastructure for reliability and compatibility. It may take several minutes for events you see on device to populate in your analytics backend.

### 2. SDK Event Delegates

Your app can also listen to events directly through the SDK delegate:

```swift
class MyPaywallDelegate: HeliumPaywallDelegate {
    func onPaywallEvent(_ event: PaywallEvent) {
        // Forward to your own analytics
        yourAnalytics.track(event.eventName, properties: event.toDictionary())
        
        switch event {
        case let purchase as PurchaseSucceededEvent:
            // Custom logic for purchases
            updateUserProfile(productId: purchase.productId)
        default:
            break
        }
    }
}
```

## Event Lifecycle

Here's the typical paywall event flow:

```
User triggers paywall
  ↓
userAllocated (if part of experiment)
  ↓
paywallOpen
  ↓
[User interacts]
  ↓
productSelected (optional)
  ↓
purchasePressed (optional)
  ↓
purchaseSucceeded/Failed/Cancelled
  ↓
paywallClose/Dismissed
```

## Forwarded Fields Reference

Helium forwards comprehensive context with every event. Here's what's included:

### Core Event Fields

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `event` | ✅ | Event name (e.g., `helium_paywallOpen`) |
| `timestamp` | ✅ | ISO 8601 timestamp of event |
| `user_id` | ✅ | User identifier |
| `type` | ✅ | Event type |

### Paywall Context

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `helium_event_trigger_name` | ✅ | Trigger that showed the paywall |
| `helium_event_paywall_template_name` | ✅ | Paywall variant name |
| `helium_event_view_type` | ✅ | How paywall was presented (modal, embedded, etc.) |
| `helium_event_product_key` | ✅ | Product selected/purchased |
| `helium_event_cta_name` | ✅ | Button/CTA clicked |
| `helium_event_error_description` | ✅ | Error details (if applicable) |

### Experiment Allocation Data

When a paywall is part of an A/B test or experiment, the following fields are included:

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `experimentInfo` | ✅ | Complete experiment allocation object (see below) |
| `experiment_i_d` | ✅ | Experiment identifier |

#### ExperimentInfo Object Structure

```json
{
  "experimentInfo": {
    "trigger": "onboarding",
    "experimentId": "exp-123",
    "experimentName": "Onboarding Price Test",
    "experimentType": "A/B/n test",
    "audienceId": "aud-456",
    "audienceData": "{\"operator\":\"AND\",\"isAllUsers\":false,\"rules\":[...]}",
    "allocationMetadata": { "notes": "High-value users" },
    "chosenVariantDetails": {
      "allocationName": "Premium Variant",
      "allocationId": "uuid-...",
      "allocationIndex": 2,
      "allocationTime": 1234567890
    },
    "hashDetails": {
      "hashedUserIdBucket1To100": 77,
      "hashMethod": "HASH_HELIUM_PERSISTENT_ID"
    }
  }
}
```

**Key Experiment Fields:**
- `experimentId`, `experimentName`, `experimentType` - Experiment metadata
- `audienceId`, `audienceData` - Targeting criteria that matched this user
- `chosenVariantDetails.allocationIndex` - Which variant (1-indexed)
- `hashDetails.hashedUserIdBucket1To100` - Consistent hash bucket for this user
- `hashDetails.hashMethod` - How the user was hashed for allocation

### User & Device Context

#### Application Info

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_traits_application_info_complete_app_version` | ✅ | Full version string |
| `context_traits_application_info_build` | ✅ | Build number |
| `context_traits_application_info_version` | ✅ | App version |
| `context_traits_application_info_app_display_name` | ✅ | App display name |
| `context_traits_application_info_helium_sdk_version` | ✅ | Helium SDK version |
| `context_traits_application_info_environment` | ✅ | Development/Production |
| `context_app_build` | ✅ | Build number |
| `context_app_version` | ✅ | App version |
| `context_app_namespace` | ✅ | Bundle identifier |
| `context_app_name` | ✅ | App name |

#### Device Info

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_traits_device_info_system_version` | ✅ | iOS version |
| `context_traits_device_info_system_name` | ✅ | Operating system name |
| `context_traits_device_info_orientation` | ✅ | Device orientation |
| `context_traits_device_info_device_model` | ✅ | iPhone model |
| `context_traits_device_info_user_interface_idiom` | ✅ | iPad/iPhone |
| `context_traits_device_info_available_capacity` | ✅ | Storage available |
| `context_traits_device_info_total_capacity` | ✅ | Total storage |
| `context_traits_device_info_environment` | ✅ | Device environment |
| `context_device_model` | ✅ | Device model |
| `context_device_name` | ✅ | Device name |
| `context_device_type` | ✅ | Device type |
| `context_device_manufacturer` | ✅ | Apple |

#### Screen Info

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_traits_screen_info_native_scale` | ✅ | Screen scale factor |
| `context_traits_screen_info_bounds` | ✅ | Screen bounds |
| `context_traits_screen_info_scale` | ✅ | UI scale |
| `context_traits_screen_info_brightness` | ✅ | Screen brightness |
| `context_traits_screen_info_native_bounds` | ✅ | Native screen bounds |
| `context_traits_screen_info_is_dark_mode` | ✅ | Dark mode enabled |
| `context_screen_width` | ✅ | Screen width |
| `context_screen_height` | ✅ | Screen height |

#### Locale & Region

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_traits_locale_uses_metric_system` | ✅ | Metric/Imperial |
| `context_traits_locale_current_time_zone_identifier` | ✅ | Timezone ID |
| `context_traits_locale_decimal_separator` | ✅ | Decimal separator |
| `context_traits_locale_current_currency_symbol` | ✅ | Currency symbol |
| `context_traits_locale_current_currency` | ✅ | Currency code |
| `context_traits_locale_current_time_zone_name` | ✅ | Timezone name |
| `context_traits_locale_current_language` | ✅ | Language code |
| `context_traits_locale_current_country` | ✅ | Country code |
| `context_traits_locale_preferred_languages` | ✅ | Preferred languages |
| `context_locale` | ✅ | Locale string |
| `context_timezone` | ✅ | Timezone |

#### Network Info

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_network_wifi` | ✅ | WiFi connected |
| `context_network_bluetooth` | ✅ | Bluetooth enabled |
| `context_network_cellular` | ✅ | Cellular connected |
| `context_network_carrier` | ✅ | Carrier name |

#### Geo Location

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_geo_continent_code` | ✅ | Continent code |
| `context_geo_continent_name` | ✅ | Continent name |
| `context_geo_country_code` | ✅ | Country code |
| `context_geo_country_name` | ✅ | Country name |
| `context_geo_country_is_e_u` | ✅ | EU member state |
| `context_geo_region_code` | ✅ | Region/state code |
| `context_geo_region_name` | ✅ | Region/state name |
| `context_geo_city_name` | ✅ | City name |
| `context_geo_postal_code_code` | ✅ | Postal code |
| `context_geo_location_latitude` | ✅ | Latitude |
| `context_geo_location_longitude` | ✅ | Longitude |
| `context_geo_location_timezone` | ✅ | Location timezone |
| `context_geo_location_accuracy_radius` | ✅ | Accuracy (km) |
| `context_geo_location_usa_data_metro_code` | ✅ | US metro code |
| `context_geo_provider_as_num` | ✅ | ASN |
| `context_geo_provider_as_name` | ✅ | ISP name |
| `context_geo_provider_isp` | ✅ | ISP |
| `context_geo_provider_domain` | ✅ | Provider domain |

### Session & Identity

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `helium_session_i_d` | ✅ | Helium session identifier |
| `helium_persistent_i_d` | ✅ | Persistent device identifier |
| `helium_paywall_session_id` | ✅ | Current paywall session |
| `app_attribution_token` | ✅ | Attribution token |
| `revenue_cat_app_user_i_d` | ✅ | RevenueCat user ID (if configured) |
| `request_ip` | ✅ | Request IP address |

### Performance Metrics

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `helium_event_num_attempts` | ✅ | Number of retry attempts |
| `helium_event_dismiss_all` | ✅ | Whether all paywalls dismissed |

### Library Metadata

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `context_library_name` | ✅ | "helium-ios" |
| `context_library_version` | ✅ | SDK version |
| `context_os_version` | ✅ | OS version |
| `context_os_name` | ✅ | OS name |
| `is_helium_event` | ✅ | Always true |

### Organization Context

| Field | Forwarded | Description |
|-------|-----------|-------------|
| `organization_i_d` | ✅ | Your organization ID |
| `paywall_u_u_i_d` | ✅ | Paywall UUID |


