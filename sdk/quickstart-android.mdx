---
title: "SDK Quickstart (Android)"
description: "Integrate Helium into your Android app"
icon: "code"
---

## **Background**

Thanks for getting started with Helium ðŸŽˆ

Helium is an upsell experimentation and optimization platform for mobile apps of all sizes. We take your appâ€™s existing paywalls and turn them into remotely editable templates that you can experiment with and optimize without waiting for new app releases.

Email founders@tryhelium.com for help/questions.

## **Installation**

Add the Helium SDK to your project using Gradle.

**1. Add repositories to your `settings.gradle.kts` file:**

Ensure you have `mavenCentral()` and `google()` in your repositories blocks.

```kotlin
// settings.gradle.kts

pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
        // You might have other repositories here
    }
}
```
*Note: If you don't have a `dependencyResolutionManagement` block, ensure `google()` and `mavenCentral()` are present in your `pluginManagement { repositories { ... } }` block.*

**2. Add the dependencies to your module-level `build.gradle.kts` file (e.g., `app/build.gradle.kts`):**

<Tabs>
  <Tab title="Core (Android View System)">
    ```kotlin
    // app/build.gradle.kts

    dependencies {
        // Choose one of the UI modules:
        implementation("com.tryhelium.paywall:core:0.0.1")
        // Other app dependencies
    }
    ```
  </Tab>
  <Tab title="Jetpack Compose UI">
    ```kotlin
    // app/build.gradle.kts

    dependencies {
        // Choose one of the UI modules:
        implementation("com.tryhelium.paywall:compose-ui:0.0.1")
        // Other app dependencies
    }
    ```
  </Tab>
</Tabs>

## Initialize Helium

You need to register Helium inside of your main application class.

```kotlin
// In your Application class's onCreate() method
Helium.register(
    this,
    apiKey = YOUR_API_KEY
)
```

After registering, you need to initialize Helium. This is typically done when a user logs in or when user-specific data is available.

```kotlin
// Example of Helium.initialize()
// Typically in your Activity, ViewModel, or a relevant part of your app's logic

val heliumPaywallDelegate = PlayStorePaywallDelegate(this)

Helium.initialize(
    heliumPaywallDelegate = heliumPaywallDelegate,
    customUserId = "YOUR_CUSTOM_USER_ID", // Can be null if the user is anonymous
    customUserTraits = HeliumUserTraits(/* populate with relevant user properties */) // Optional
)
```

## Observing Paywall Configuration Download Status

The Helium SDK provides a `downloadStatus` flow that you can observe to get updates on the status of the paywall configuration download. This is useful for showing loading indicators or handling download failures.

The `downloadStatus` is a Kotlin `Flow` that emits `HeliumConfigStatus` states. The possible states are:

-   `HeliumConfigStatus.NotYetDownloaded`: The initial state before the download has started.
-   `HeliumConfigStatus.Downloading`: Indicates that the paywall configuration is currently being downloaded.
-   `HeliumConfigStatus.DownloadFailure`: Indicates that the paywall configuration download has failed.
-   `HeliumConfigStatus.DownloadSuccess`: Indicates that the paywall configuration has been successfully downloaded.

Here's how you can observe the `downloadStatus` flow in your Activity or Fragment:

```kotlin
// In your Activity or Fragment
lifecycleScope.launch {
    Helium.shared.downloadStatus.collect { status ->
        when (status) {
            is HeliumConfigStatus.NotYetDownloaded -> {
                // Handle not yet downloaded state
            }
            is HeliumConfigStatus.Downloading -> {
                // Handle downloading state
            }
            is HeliumConfigStatus.DownloadFailure -> {
                // Handle download failure
            }
            is HeliumConfigStatus.DownloadSuccess -> {
                // Handle download success
            }
        }
    }
}
```

## HeliumPaywallDelegate

You can provide an implementation of the `HeliumPaywallDelegate` or use one of the default implementations that we have provided, such as `PlayStorePaywallDelegate` or `RevenueCatPaywallDelegate`.

<Tabs>
  <Tab title="PlayStorePaywallDelegate">
    Use the `PlayStorePaywallDelegate` to handle purchases using Google Play Billing.
  </Tab>
  <Tab title="RevenueCatPaywallDelegate">
    Use the `RevenueCatPaywallDelegate` to handle purchases if your app is using RevenueCat.
  </Tab>
  <Tab title="Custom Delegate">
    You can also create a custom delegate and implement your own purchase logic.

    The `HeliumPaywallDelegate` is defined as follows:

    ```kotlin
    interface HeliumPaywallDelegate {
        suspend fun makePurchase(productId: String): HeliumPaywallTransactionStatus
        suspend fun restorePurchases(): Boolean
        fun onHeliumPaywallEvent(event: HeliumPaywallEvent)
    }
    ```
  </Tab>
</Tabs>


## Presenting Paywalls

To present a Paywall, ensure you have registered and initialized the library. The SDK provides UI components that handle the underlying `PaywallWebViewManager`.

We provide two different ways of presenting the Paywall:

<Tabs>
  <Tab title="Jetpack Compose">
    The preferred way to integrate the Helium paywall is to add it to your Navigation Graph. Inside your `NavHost`, you can use the `buildHelium()` destination builder. This function now requires a `HeliumNavigationDispatcher` to handle navigation events originating from the paywall, such as closing the screen or navigating to a different paywall.

    While the `navigationDispatcher` parameter is optional, failing to provide an implementation will result in navigation-related issues when the user interacts with the paywall.
    
    Here is an example of how to set it up:

    ```kotlin
    NavHost(
        navController = navController,
        startDestination = "landing",
        modifier = Modifier.fillMaxSize()
    ) {
        composable("landing") {
            LandingScreen(navController = navController)
        }
        buildHelium(
            navigationDispatcher = { command ->
                when (command) {
                    HeliumNavigationCommand.GoBack -> navController.popBackStack()
                    is HeliumNavigationCommand.Paywall -> navController.navigate("helium?trigger=${command.trigger}")
                }
            }
        )
    }
    ```

    To present a paywall, you can then navigate to the Helium route with a specific trigger:

    ```kotlin
    // Navigate to the paywall
    navController.navigate("helium?trigger=sdk_test")
    ```
  </Tab>
  <Tab title="Android View System">
    You can present paywalls using either an `Activity` or a `Fragment`.

    ##### Using HeliumPaywallActivity

    Using the `HeliumPaywallActivity` requires you to create a subclass and implement the `HeliumNavigationDispatcher` interface. Before you present the paywall, you must initialize the `Helium` SDK.

    Here is an example of how to set it up:

    **1. Create your Paywall Activity:**

    ```kotlin
    // In your app, for example, MyPaywallActivity.kt
    class MyPaywallActivity : HeliumPaywallActivity() {
        override fun navigate(command: HeliumNavigationCommand) {
            when (command) {
                HeliumNavigationCommand.GoBack -> finish()
                is HeliumNavigationCommand.Paywall -> {
                    // Handle navigation to another paywall if needed
                }
            }
        }
    }
    ```

    *Note: Don't forget to add `MyPaywallActivity` to your `AndroidManifest.xml`.*

    **2. Initialize Helium and Launch your Paywall Activity:**

    Before launching your paywall, make sure you have initialized the Helium SDK, as described in the "Initialize Helium" section.

    ```kotlin
    // To launch your paywall from another Activity or Fragment

    // 1. Initialize Helium
    Helium.shared.initialize(
        heliumPaywallDelegate = SamplePaywallDelegate(), // Your implementation of HeliumPaywallDelegate
        customUserId = "YOUR_CUSTOM_USER_ID",
        customUserTraits = null
    )

    // 2. Launch your Paywall Activity
    val intent = Intent(this, MyPaywallActivity::class.java).apply {
        putExtra(HeliumPaywallActivity.EXTRA_TRIGGER, "sdk_test")
    }
    startActivity(intent)
    ```

    ##### Using HeliumPaywallFragment

    Using the `HeliumPaywallFragment` requires you to create a subclass and implement the `HeliumNavigationDispatcher` interface. Before you present the paywall, you must initialize the `Helium` SDK.

    **1. Create your Paywall Fragment:**

    ```kotlin
    // In your app, for example, MyPaywallFragment.kt
    class MyPaywallFragment : HeliumPaywallFragment() {
        override fun navigate(command: HeliumNavigationCommand) {
            when (command) {
                HeliumNavigationCommand.GoBack -> requireActivity().supportFragmentManager.popBackStack()
                is HeliumNavigationCommand.Paywall -> {
                    // Handle navigation to another paywall if needed
                }
            }
        }

        companion object {
            fun newInstance(trigger: String): MyPaywallFragment {
                return MyPaywallFragment().apply {
                    arguments = Bundle().apply {
                        putString(ARG_TRIGGER, trigger)
                    }
                }
            }
        }
    }
    ```

    **2. Initialize Helium and Launch your Paywall Fragment:**

    Before launching your paywall, make sure you have initialized the Helium SDK, as described in the "Initialize Helium" section.

    ```kotlin
    // To launch your paywall from an Activity or another Fragment

    // 1. Initialize Helium
    Helium.shared.initialize(
        heliumPaywallDelegate = SamplePaywallDelegate(), // Your implementation of HeliumPaywallDelegate
        customUserId = "YOUR_CUSTOM_USER_ID",
        customUserTraits = null
    )

    // 2. Launch your Paywall Fragment
    val fragment = MyPaywallFragment.newInstance("sdk_test")
    supportFragmentManager.beginTransaction()
        .replace(R.id.fragment_container, fragment)
        .addToBackStack(null)
        .commit()
    ```
  </Tab>
</Tabs>

## Testing

Docs here coming soon!