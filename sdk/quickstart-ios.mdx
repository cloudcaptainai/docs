---
title: "SDK Quickstart (iOS)"
description: "Integrate Helium into your iOS app"
icon: "/images/sdk/logos/apple-173-svgrepo-com.svg"
---

<Info>
  **Using an older SDK version?**
  
  If you're upgrading from SDK v2.x, check our [Migration Guide](/sdk-reference/migration-2-to-3) for breaking changes and upgrade instructions.
</Info>

## **Background**

Get set up with the Helium SDK for iOS in 5 minutes. Reach out over your Helium slack channel, or email [founders@tryhelium.com](mailto:founders@tryhelium.com) for any questions.

## **Installation**

We recommend using Swift Package Manager (SPM), but if your project primarily uses Cocoapods it might make sense to install the Helium Cocoapod instead.

<Tabs>
  <Tab title="Swift Package Manager (SPM)">
    1. In Xcode, navigate to your project's **Package Dependencies:**

       ![Spm Add Pn](/images/spm-add.png)
    2. Click the **\+** button and search for the Helium package URL:

       ```
       https://github.com/cloudcaptainai/helium-swift.git
       ```
    3. Click **Add Package**.
    4. Select version **3.0.0** or later in the version rules.
    5. In the dialog that appears, make sure to add the **Helium** product to your app's main target:

       ![Spm Target Pn](/images/spm_target.png)
    6. _(Optional)_ If you are using RevenueCat to manage purchases, we recommended you also add **HeliumRevenueCat** to your target so that you can use our RevenueCatDelegate. Otherwise leave as **None** for the HeliumRevenueCat row.

    <Warning>
      The **HeliumRevenueCat** target includes [purchases-ios-spm](https://github.com/RevenueCat/purchases-ios-spm) as a dependency, _not_ [purchases-ios](https://github.com/RevenueCat/purchases-ios) and you may encounter build issues if are using **purchases-ios** with SPM.
    </Warning>
    7. Select **Add Package** in the dialog and Helium should now be ready for import.
  </Tab>
  <Tab title="Cocoapod">
    ### Option 1: Core functionality only

    Add this to your Podfile:

    ```ruby
    pod 'Helium', '~> 3.0'
    ```

    Then run:

    ```bash
    pod install
    ```

    ### Option 2: Core \+ RevenueCat

    <Note>
      Recommended if you are using RevenueCat to manage purchases.
    </Note>
    Add this to your Podfile:

    ```ruby
    pod 'Helium/RevenueCat', '~> 3.0'
    ```

    Then run:

    ```bash
    pod install
    ```
  </Tab>
</Tabs>

## Initialize Helium

Initialize the Helium SDK as early as possible in your app's lifecycle. Choose the appropriate location based on your app's architecture:

<Tabs>
  <Tab title="SwiftUI">
    ```swift
    @main
    struct MyApp: App {
        init() {
            // Call Helium.shared.initialize here (see example below)
        }

        var body: some Scene {
            WindowGroup {
                ContentView()
            }
        }
    }
    ```
  </Tab>
  <Tab title="SceneDelegate">
    ```swift
    class SceneDelegate: UIResponder, UIWindowSceneDelegate {

        var window: UIWindow?

        func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
            // Call Helium.shared.initialize here (see example below)
        }
    }
    ```
  </Tab>
  <Tab title="AppDelegate">
    ```swift
    @UIApplicationMain
    class AppDelegate: UIResponder, UIApplicationDelegate {

        var window: UIWindow?

        func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
            // Call Helium.shared.initialize here (see example below)
            return true
        }
    }
    ```
  </Tab>
</Tabs>

Add necessary imports:

```swift
import Helium
import SwiftUI
```

### Basic Initialization (v3.x)

The simplest initialization using the new `HeliumFallbackConfig`:

```swift
// Option 1: With fallback bundle (recommended)
let fallbackBundleURL = Bundle.main.url(forResource: "fallback-bundle", withExtension: "json")!
let fallbackConfig = HeliumFallbackConfig.withFallbackBundle(fallbackBundleURL)

// Option 2: With fallback view
let fallbackView = Text("Loading premium features...")
let fallbackConfig = HeliumFallbackConfig.withFallbackView(fallbackView)

Helium.shared.initialize(
    apiKey: "<your-helium-api-key>",
    heliumPaywallDelegate: nil, // Will use StoreKitDelegate by default
    fallbackConfig: fallbackConfig,
    revenueCatAppUserId: Purchases.shared.appUserID // RevenueCat ONLY
)
```

### Advanced Initialization with Loading States

v3.x introduces sophisticated loading state management:

```swift
// Configure loading behavior
let fallbackConfig = HeliumFallbackConfig.withFallbackBundle(
    fallbackBundleURL,
    useLoadingState: true,           // Show loading state before paywall
    loadingBudget: 2.0,              // Max 2 seconds loading time
    loadingView: CustomLoadingView(), // Optional custom loading view
    perTriggerLoadingConfig: [        // Per-trigger overrides
        "premium_features": TriggerLoadingConfig(
            useLoadingState: false    // No loading for this trigger
        ),
        "onboarding": TriggerLoadingConfig(
            loadingBudget: 3.0        // Allow 3 seconds for onboarding
        )
    ]
)

Helium.shared.initialize(
    apiKey: "<your-helium-api-key>",
    heliumPaywallDelegate: YourHeliumPaywallDelegate(),
    fallbackConfig: fallbackConfig,
    customUserId: "user_123",
    customUserTraits: HeliumUserTraits([
        "subscription_tier": "pro",
        "account_age_days": 30
    ])
)
```

<ResponseField name="Helium.shared.initialize" type="method">
  <Expandable title="v3.x properties">
    <ResponseField name="apiKey" type="string" required>
      You can create or retrieve your api key from [Account Settings](https://app.tryhelium.com/profile).
    </ResponseField>
    <ResponseField name="heliumPaywallDelegate" type="HeliumPaywallDelegate?">
      Delegate to handle paywall events and callbacks. **New in v3**: If nil, defaults to `StoreKitDelegate()`.
    </ResponseField>
    <ResponseField name="fallbackConfig" type="HeliumFallbackConfig" required>
      **New in v3**: Comprehensive fallback and loading configuration. Required parameter.
    </ResponseField>
    <ResponseField name="customUserId" type="String?">
      _(Optional)_ Custom user id for analytics attribution
    </ResponseField>
    <ResponseField name="customUserTraits" type="HeliumUserTraits?">
      _(Optional)_ Custom user traits for targeting and personalization
    </ResponseField>
    <ResponseField name="appAttributionToken" type="UUID?">
      _(Optional)_ Set this if you use a custom appAccountToken with StoreKit
    </ResponseField>
    <ResponseField name="revenueCatAppUserId" type="String?">
      _(Optional)_ RevenueCat ONLY. Supply RevenueCat appUserID here
    </ResponseField>
  </Expandable>
</ResponseField>

## HeliumFallbackConfig (New in v3)

The new `HeliumFallbackConfig` provides fine-grained control over fallback and loading behavior:

```swift
public struct HeliumFallbackConfig {
    // Factory methods
    static func withFallbackBundle(_ bundleURL: URL, ...) -> HeliumFallbackConfig
    static func withFallbackView(_ view: any View, ...) -> HeliumFallbackConfig
    static func withFallbackHandler(_ handler: @escaping (String) -> (any View)?, ...) -> HeliumFallbackConfig
    
    // Loading configuration
    public let useLoadingState: Bool          // Default: true
    public let loadingBudget: TimeInterval    // Default: 2.0 seconds
    public let loadingView: (any View)?       // Default: shimmer animation
    
    // Per-trigger overrides
    public let perTriggerLoadingConfig: [String: TriggerLoadingConfig]?
    public let fallbackPerTrigger: [String: any View]?
}
```

## Event System v2 (New in v3)

v3.x introduces a new protocol-based event system with typed events:

### Using PaywallEventHandlers

```swift
Helium.shared.presentUpsell(
    trigger: "premium_features",
    eventHandlers: PaywallEventHandlers()
        .onOpen { event in
            print("Paywall opened: \(event.paywallName)")
        }
        .onClose { event in
            print("Paywall closed: \(event.paywallName)")
        }
        .onPurchaseSucceeded { event in
            print("Purchase successful: \(event.productId)")
        },
    customPaywallTraits: ["source": "settings_menu"]
)
```

### Delegate Event Handling

For delegate-based event handling, implement the new `onPaywallEvent` method:

```swift
class MyDelegate: StoreKitDelegate {
    override func onPaywallEvent(_ event: PaywallEvent) {
        switch event {
        case let openEvent as PaywallOpenEvent:
            print("Opened: \(openEvent.paywallName)")
        case let purchaseEvent as PurchaseSucceededEvent:
            print("Purchased: \(purchaseEvent.productId)")
        default:
            break
        }
    }
}
```

<Note>
  **Migration Note**: The old `onHeliumPaywallEvent(event:)` method is deprecated. Property names have changed:
  - `paywallTemplateName` → `paywallName`
  - `subscriptionKey` → `productId`
</Note>

## Presenting Paywalls with Custom Traits

v3.x adds support for custom paywall traits at presentation time:

```swift
// Programmatic presentation with custom traits
Helium.shared.presentUpsell(
    trigger: "post_onboarding",
    customPaywallTraits: [
        "user_segment": "power_user",
        "referral_source": "organic"
    ]
)

// SwiftUI ViewModifier with traits
struct ContentView: View {
    @State var isPresented = false
    
    var body: some View {
        Button("Show Premium") {
            isPresented = true
        }
        .triggerUpsell(
            isPresented: $isPresented,
            trigger: "premium_button",
            customPaywallTraits: ["context": "main_screen"]
        )
    }
}

// Get view with event handlers
let paywallView = Helium.shared.upsellViewForTrigger(
    trigger: "settings",
    eventHandlers: PaywallEventHandlers()
        .onOpen { _ in analytics.track("paywall_viewed") }
        .onPurchaseSucceeded { _ in analytics.track("purchase_completed") },
    customPaywallTraits: ["ab_test": "variant_b"]
)
```

## StoreKit 2 Integration

v3.x requires iOS 15+ and fully embraces StoreKit 2:

```swift
// The default StoreKitDelegate handles everything
Helium.shared.initialize(
    apiKey: "<your-api-key>",
    heliumPaywallDelegate: nil, // Uses StoreKitDelegate automatically
    fallbackConfig: fallbackConfig
)

// Or provide product IDs explicitly
let delegate = StoreKitDelegate(productIds: [
    "com.app.monthly",
    "com.app.yearly"
])
```

## Migration from v2.x

Key changes when upgrading from v2.x to v3.x:

1. **Update minimum iOS version** to 15.0 in your project
2. **Replace fallback parameters** with `HeliumFallbackConfig`:
   ```swift
   // Old (v2.x)
   Helium.shared.initialize(
       fallbackPaywall: Text("Fallback"),
       fallbackBundleURL: bundleURL
   )
   
   // New (v3.x)
   let fallbackConfig = HeliumFallbackConfig.withFallbackBundle(bundleURL)
   Helium.shared.initialize(
       fallbackConfig: fallbackConfig
   )
   ```

3. **Update event handling** to use new event types
4. **Review delegate usage** - you may be able to remove custom delegates if using StoreKit

## Example App

<Card title="Complete Example App" icon="github" href="https://github.com/cloudcaptainai/example-helium-swift">
  Full SwiftUI example with Helium SDK v3.0 implementation including StoreKit testing setup, fallback configuration, and custom user traits.
</Card>

## Testing

After integration, please message us directly to get set up with a test app + in-app test support. The v3 SDK includes improved testing capabilities with better fallback simulation.
